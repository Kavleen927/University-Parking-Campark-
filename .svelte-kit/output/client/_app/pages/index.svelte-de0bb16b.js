import{S as ee,i as te,s as le,Q as se,e as p,k as h,t as b,w as oe,c as d,a as G,m as R,h as v,d as _,x as ie,b as P,g as k,F as f,y as re,H as ae,j as Y,q as ne,o as fe,B as ce,O as ue,l as A,G as _e}from"../chunks/vendor-e346f08a.js";import{s as me}from"../chunks/stores-688fc5f4.js";function pe(a){let l,s,e,o=a[4]&&X(),i=a[5]&&Z(a),r=a[6]&&x(a);return{c(){o&&o.c(),l=h(),i&&i.c(),s=h(),r&&r.c(),e=A()},l(t){o&&o.l(t),l=R(t),i&&i.l(t),s=R(t),r&&r.l(t),e=A()},m(t,n){o&&o.m(t,n),k(t,l,n),i&&i.m(t,n),k(t,s,n),r&&r.m(t,n),k(t,e,n)},p(t,n){t[4]?o||(o=X(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),t[5]?i?i.p(t,n):(i=Z(t),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null),t[6]?r?r.p(t,n):(r=x(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(t){o&&o.d(t),t&&_(l),i&&i.d(t),t&&_(s),r&&r.d(t),t&&_(e)}}}function de(a){let l;return{c(){l=b("Your browser does not support the Geolocation API.")},l(s){l=v(s,"Your browser does not support the Geolocation API.")},m(s,e){k(s,l,e)},p:_e,d(s){s&&_(l)}}}function X(a){let l;return{c(){l=b("Loading...")},l(s){l=v(s,"Loading...")},m(s,e){k(s,l,e)},d(s){s&&_(l)}}}function Z(a){let l=JSON.stringify(a[3])+"",s;return{c(){s=b(l)},l(e){s=v(e,l)},m(e,o){k(e,s,o)},p(e,o){o&8&&l!==(l=JSON.stringify(e[3])+"")&&Y(s,l)},d(e){e&&_(s)}}}function x(a){let l,s=a[6].code+"",e,o,i=a[6].message+"",r;return{c(){l=b("An error occurred. "),e=b(s),o=h(),r=b(i)},l(t){l=v(t,"An error occurred. "),e=v(t,s),o=R(t),r=v(t,i)},m(t,n){k(t,l,n),k(t,e,n),k(t,o,n),k(t,r,n)},p(t,n){n&64&&s!==(s=t[6].code+"")&&Y(e,s),n&64&&i!==(i=t[6].message+"")&&Y(r,i)},d(t){t&&_(l),t&&_(e),t&&_(o),t&&_(r)}}}function be(a){let l;function s(i,r){return i[7]?de:pe}let e=s(a),o=e(a);return{c(){o.c(),l=A()},l(i){o.l(i),l=A()},m(i,r){o.m(i,r),k(i,l,r)},p(i,r){e===(e=s(i))&&o?o.p(i,r):(o.d(1),o=e(i),o&&(o.c(),o.m(l.parentNode,l)))},d(i){o.d(i),i&&_(l)}}}function ve(a){let l,s,e,o,i,r,t,n,I,z=a[1].user.name+"",g,S,D,j,q,O=a[1].user.email+"",w,H,J,N,L,T,V,W,C,F,y,E,Q,K;return y=new se({props:{getPosition:a[0],$$slots:{default:[be,({coords:u,loading:m,success:$,error:c,notSupported:B})=>({3:u,4:m,5:$,6:c,7:B}),({coords:u,loading:m,success:$,error:c,notSupported:B})=>(u?8:0)|(m?16:0)|($?32:0)|(c?64:0)|(B?128:0)]},$$scope:{ctx:a}}}),{c(){l=p("body"),s=p("div"),e=p("div"),o=p("br"),i=p("br"),r=p("br"),t=h(),n=p("h1"),I=b("Welcome, "),g=b(z),S=b("!"),D=h(),j=p("p"),q=b("Your email is "),w=b(O),H=p("br"),J=h(),N=p("button"),L=b("Get geolocation"),T=h(),V=p("br"),W=p("br"),C=p("br"),F=h(),oe(y.$$.fragment),this.h()},l(u){l=d(u,"BODY",{class:!0});var m=G(l);s=d(m,"DIV",{class:!0});var $=G(s);e=d($,"DIV",{id:!0,class:!0});var c=G(e);o=d(c,"BR",{}),i=d(c,"BR",{}),r=d(c,"BR",{}),t=R(c),n=d(c,"H1",{class:!0});var B=G(n);I=v(B,"Welcome, "),g=v(B,z),S=v(B,"!"),B.forEach(_),D=R(c),j=d(c,"P",{});var U=G(j);q=v(U,"Your email is "),w=v(U,O),U.forEach(_),H=d(c,"BR",{}),J=R(c),N=d(c,"BUTTON",{class:!0});var M=G(N);L=v(M,"Get geolocation"),M.forEach(_),T=R(c),V=d(c,"BR",{}),W=d(c,"BR",{}),C=d(c,"BR",{}),F=R(c),ie(y.$$.fragment,c),c.forEach(_),$.forEach(_),m.forEach(_),this.h()},h(){P(n,"class","svelte-f1jmza"),P(N,"class","svelte-f1jmza"),P(e,"id","content"),P(e,"class","svelte-f1jmza"),P(s,"class","svelte-f1jmza"),P(l,"class","svelte-f1jmza")},m(u,m){k(u,l,m),f(l,s),f(s,e),f(e,o),f(e,i),f(e,r),f(e,t),f(e,n),f(n,I),f(n,g),f(n,S),f(e,D),f(e,j),f(j,q),f(j,w),f(e,H),f(e,J),f(e,N),f(N,L),f(e,T),f(e,V),f(e,W),f(e,C),f(e,F),re(y,e,null),E=!0,Q||(K=ae(N,"click",a[2]),Q=!0)},p(u,[m]){(!E||m&2)&&z!==(z=u[1].user.name+"")&&Y(g,z),(!E||m&2)&&O!==(O=u[1].user.email+"")&&Y(w,O);const $={};m&1&&($.getPosition=u[0]),m&504&&($.$$scope={dirty:m,ctx:u}),y.$set($)},i(u){E||(ne(y.$$.fragment,u),E=!0)},o(u){fe(y.$$.fragment,u),E=!1},d(u){u&&_(l),ce(y),Q=!1,K()}}}const Be=async({session:a})=>a.user.exists?{}:{status:302,redirect:"/login"};function ke(a,l,s){let e;ue(a,me,r=>s(1,e=r));let o=!1;return[o,e,()=>s(0,o=!0)]}class he extends ee{constructor(l){super();te(this,l,ke,ve,le,{})}}export{he as default,Be as load};
