import{S as Q,i as U,s as g,Q as K,w as M,k as h,e as y,t as p,x as X,m as z,c as N,a as G,h as d,d as c,b as P,y as Z,g as m,F as _,H as x,j as Y,q as ee,o as te,B as le,O as se,l as B,G as oe}from"../chunks/vendor-7b4d9e86.js";import{s as ie}from"../chunks/stores-3d447ff4.js";function re(a){let l,o,i,s=a[4]&&W(),e=a[5]&&C(a),r=a[6]&&F(a);return{c(){s&&s.c(),l=h(),e&&e.c(),o=h(),r&&r.c(),i=B()},l(t){s&&s.l(t),l=z(t),e&&e.l(t),o=z(t),r&&r.l(t),i=B()},m(t,n){s&&s.m(t,n),m(t,l,n),e&&e.m(t,n),m(t,o,n),r&&r.m(t,n),m(t,i,n)},p(t,n){t[4]?s||(s=W(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),t[5]?e?e.p(t,n):(e=C(t),e.c(),e.m(o.parentNode,o)):e&&(e.d(1),e=null),t[6]?r?r.p(t,n):(r=F(t),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(t){s&&s.d(t),t&&c(l),e&&e.d(t),t&&c(o),r&&r.d(t),t&&c(i)}}}function ae(a){let l;return{c(){l=p("Your browser does not support the Geolocation API.")},l(o){l=d(o,"Your browser does not support the Geolocation API.")},m(o,i){m(o,l,i)},p:oe,d(o){o&&c(l)}}}function W(a){let l;return{c(){l=p("Loading...")},l(o){l=d(o,"Loading...")},m(o,i){m(o,l,i)},d(o){o&&c(l)}}}function C(a){let l=JSON.stringify(a[3])+"",o;return{c(){o=p(l)},l(i){o=d(i,l)},m(i,s){m(i,o,s)},p(i,s){s&8&&l!==(l=JSON.stringify(i[3])+"")&&Y(o,l)},d(i){i&&c(o)}}}function F(a){let l,o=a[6].code+"",i,s,e=a[6].message+"",r;return{c(){l=p("An error occurred. "),i=p(o),s=h(),r=p(e)},l(t){l=d(t,"An error occurred. "),i=d(t,o),s=z(t),r=d(t,e)},m(t,n){m(t,l,n),m(t,i,n),m(t,s,n),m(t,r,n)},p(t,n){n&64&&o!==(o=t[6].code+"")&&Y(i,o),n&64&&e!==(e=t[6].message+"")&&Y(r,e)},d(t){t&&c(l),t&&c(i),t&&c(s),t&&c(r)}}}function fe(a){let l;function o(e,r){return e[7]?ae:re}let i=o(a),s=i(a);return{c(){s.c(),l=B()},l(e){s.l(e),l=B()},m(e,r){s.m(e,r),m(e,l,r)},p(e,r){i===(i=o(e))&&s?s.p(e,r):(s.d(1),s=i(e),s&&(s.c(),s.m(l.parentNode,l)))},d(e){s.d(e),e&&c(l)}}}function ne(a){let l,o,i,s,e,r,t,n=a[1].user.name+"",w,I,S,j,D,O=a[1].user.email+"",A,q,H,$,J,E,L,T;return l=new K({props:{getPosition:a[0],$$slots:{default:[fe,({coords:f,loading:u,success:v,error:b,notSupported:k})=>({3:f,4:u,5:v,6:b,7:k}),({coords:f,loading:u,success:v,error:b,notSupported:k})=>(f?8:0)|(u?16:0)|(v?32:0)|(b?64:0)|(k?128:0)]},$$scope:{ctx:a}}}),{c(){M(l.$$.fragment),o=h(),i=y("body"),s=y("div"),e=y("div"),r=y("h1"),t=p("Welcome, "),w=p(n),I=p("!"),S=h(),j=y("p"),D=p("Your email is "),A=p(O),q=y("br"),H=h(),$=y("button"),J=p("Get geolocation"),this.h()},l(f){X(l.$$.fragment,f),o=z(f),i=N(f,"BODY",{class:!0});var u=G(i);s=N(u,"DIV",{class:!0});var v=G(s);e=N(v,"DIV",{id:!0,class:!0});var b=G(e);r=N(b,"H1",{class:!0});var k=G(r);t=d(k,"Welcome, "),w=d(k,n),I=d(k,"!"),k.forEach(c),S=z(b),j=N(b,"P",{});var R=G(j);D=d(R,"Your email is "),A=d(R,O),R.forEach(c),q=N(b,"BR",{}),H=z(b),$=N(b,"BUTTON",{class:!0});var V=G($);J=d(V,"Get geolocation"),V.forEach(c),b.forEach(c),v.forEach(c),u.forEach(c),this.h()},h(){P(r,"class","svelte-f1jmza"),P($,"class","svelte-f1jmza"),P(e,"id","content"),P(e,"class","svelte-f1jmza"),P(s,"class","svelte-f1jmza"),P(i,"class","svelte-f1jmza")},m(f,u){Z(l,f,u),m(f,o,u),m(f,i,u),_(i,s),_(s,e),_(e,r),_(r,t),_(r,w),_(r,I),_(e,S),_(e,j),_(j,D),_(j,A),_(e,q),_(e,H),_(e,$),_($,J),E=!0,L||(T=x($,"click",a[2]),L=!0)},p(f,[u]){const v={};u&1&&(v.getPosition=f[0]),u&504&&(v.$$scope={dirty:u,ctx:f}),l.$set(v),(!E||u&2)&&n!==(n=f[1].user.name+"")&&Y(w,n),(!E||u&2)&&O!==(O=f[1].user.email+"")&&Y(A,O)},i(f){E||(ee(l.$$.fragment,f),E=!0)},o(f){te(l.$$.fragment,f),E=!1},d(f){le(l,f),f&&c(o),f&&c(i),L=!1,T()}}}const me=async({session:a})=>a.user.exists?{}:{status:302,redirect:"/login"};function ce(a,l,o){let i;se(a,ie,r=>o(1,i=r));let s=!1;return[s,i,()=>o(0,s=!0)]}class pe extends Q{constructor(l){super();U(this,l,ce,ne,g,{})}}export{pe as default,me as load};
